# Соглашения о наименовании

## Общее

* Названия всегда давайте в **единственном числе**.
* Названия всегда пишите **строчными буквами**.
* **Используйте** в именах только буквы, цифры и символ подчёркивания.
* **Используйте** [snack_case](https://ru.wikipedia.org/wiki/Snake_case) стиль именования.
* **Убедитесь** в том, что имя уникально и его нет в списке зарезервированных ключевых слов.
* **Ограничивайте** длину имени 30 байтами (это 30 символов, если не используется многобайтный набор символов).
* **Начинайте** имена с буквы и **не заканчивайте** их символом подчёркивания.
* **Избегайте** сокращений. Если их всё же нужно использовать, убедитесь в том, что они общепонятны.
* **Избегайте** нескольких подряд идущих символов подчёркивания.

## Таблицы

* **Не используйте** описательные префиксы вида `tbl_` и венгерскую нотацию в целом.
* **Не допускайте** совпадений названия таблицы с названием любого из её столбцов.
* **Промежуточным** таблицам даем имена с префиксом `tie_` (например: `tie_role_account`)
  * Если БД не разбита на схемы, то сначала ставим префикс **предметной** области, затем префикс `tie` (например: `user_tie_role_account`)

### Универсальные суффиксы для таблиц

* `_localization` — таблица, содержащая переводы значений сущности на разные языки.
* `_log` — таблица для логирования.

## Столбцы

* По возможности, **используйте** `id` в качестве первичного идентификатора таблицы.
* **Не создавайте** в таблице столбцов с таким же названием, как у неё самой.
* поля, означающие **время**, именуются с суффиксом `_at` (например: `created_at`, `updated_at`, `publicated_at`)
* **флаги** именуются с префиксом `is_` (например: `is_readed`, `is_favorite`)
* **флаги наличия** именуются с префиксом `has_` (например: `has_files`, `has_comment`)
* **порядок сортровки** именуется как `sort`
* **не используйте** `not` в названии флага, лучше назвать поле `is_new` вместо `is_not_readed`.
* поля, используемые для **связи** с другими таблицами, именуются с суффиксом (например: `user_id`, `company_id`, `currency_code`)
	* имя поля со связью составляется так: `таблица_поле`, где таблица и поле те, на которые ссылаемся
	* но есть и исключения, например, "редактор новости" может именоваться как `editor_id`, а ссылаться на таблицу `person`. Причина этому - в предметной области "новости" фигурирует понятие "редактор".
	* если поле ссылется на поле этой же таблицы, то именуем так: `parent_id`, `parent_name`.
* имена поля для **названия** сущности именуем как `name`.

### Универсальные суффиксы для столбцов

Приведённые ниже суффиксы универсальны, что гарантирует простоту понимания значения столбцов из кода SQL.

* `_id` — связь с другой таблицей через ее первичный ключ.
* `_status` — флаг или любой статус, например `publication_status`.
* `_total` или `_count` — общее количество или сумма значений.
* `_num` — поле, содержащее число.
* `_name` — любое имя, например `first_name`.
* `_seq` — непрерывная последовательность значений.
* `_at` — колонка, содержащая дату.
* `_tally` — счётчик.
* `_size` — размер или величина чего-либо, например размер файла.
* `_addr` — физический или абстрактный адрес, например `ip_addr`.

### Типы данных

* По возможности **не используйте** специфичные для той или иной СУБД типы данных. Это может негативно сказаться на переносимости, а также этих типов может не оказаться в старых версиях этих же СУБД.
* Для работы с плавающей точкой **используйте** только `REAL` или `FLOAT`, но где нет необходимости в подобных вычислениях, всегда **используйте** `NUMERIC` и `DECIMAL`. Ошибки округления в операциях с плавающей точкой могут оказаться очень некстати.

## Расположение и порядок

* Первичный ключ
* Уникальные атрибуты
* Различные значения
* Статусы
* Флаги
* Сортировка
* Время

## Хранимые процедуры

* Имя должно содержать глагол.
* Не используйте описательные префиксы вида `sp_` и венгерскую нотацию в целом.
