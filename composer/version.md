Версионирование
==============

Версионирование обеспечивает гарантию работоспособности Вашего расширения в проектах при его изменениях.

## Кратко

Учитывая номер версии `МАЖОРНАЯ.МИНОРНАЯ.ПАТЧ`, следует увеличивать:

* **МАЖОРНУЮ** версию, когда сделаны обратно несовместимые изменения *API*.
* **МИНОРНУЮ** версию, когда вы добавляете новый функционал, не нарушая обратной совместимости.
* **ПАТЧ** версию, когда вы делаете обратно совместимые исправления.

При переносе методов, констант и т.д:

* объявлять старый код устаревшим, но не удалять его до следующего **мажорного** релиза
* в doc comment указывать, куда был перенесен код
* написать документацию
* повысить **минорную** или **патч** версию
* при выпуске **мажорной** версии, весь код, который помечен как устаревший, удаляется

Дополнительные обозначения для *предрелизных* и *билд-метаданных* возможны как дополнения к `МАЖОРНАЯ.МИНОРНАЯ.ПАТЧ` формату.

При переходе на новую **мажорную** версию следует удалить устаревший функционал (`@deprecated`).

## Выражения

При указании допустимых версий пакетов можно использовать:

* точное соответствие - `1.2.3`
* диапазоны версий - `<1.2.3`, `<=1.2.3`, `>1.2.3 <1.3`
* последняя доступная - `1.2.*`, `~1.2.3`, `^1.2.3`

Указание тильды `~1.2.3` будет включать в себя все версии до 1.3 (не включительно), 
так как в семантическом версионировании это является моментом внедрения новых функциональных возможностей. 
В данном случае будет получена последняя из стабильных минорных версий. Т.е. будет меняться только последняя цифра — 1.2.5, 1.2.8 и тд.

Указание знака вставки `^1.2.3` буквально означает “опасаться только критических изменений” 
и будет включать в себя версии вплоть до 2.0. 
Применительно к семантическому версионированию, 
изменение мажорной версии является моментом внесения в проект критических изменений, 
так что версии 1.3, 1.4 и 1.9 подходят, в то время как 2.0 — уже нет.
Т.е. не меняется только первая цифра.

Тильда: ~1.2.3 — это самый распространённый и безопасный способ указания версии.


## Конфигурация в проекте

Если Вы используете версионирование, то в файле `composer.json` боевого проекта необходимо указать маску версии вместо `dev-master`, например:

```json
"example/yii2-extname": "1.*"
```

Более подробно про семантическое версионирование можете прочитать [здесь](http://semver.org/lang/ru).

## Ссылки

* [Версии composer, git теги и ветки](https://github.com/rsajob/docs/wiki/%5Bcomposer%5D-%D0%92%D0%B5%D1%80%D1%81%D0%B8%D0%B8-composer,-git-%D1%82%D0%B5%D0%B3%D0%B8-%D0%B8-%D0%B2%D0%B5%D1%82%D0%BA%D0%B8)
